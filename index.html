<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">

    <title>paper-dialog</title>

    <script src="bower_components/webcomponentsjs/webcomponents.js"></script>
    <script src="bower_components/moment/min/moment-with-locales.min.js"></script>
    <link href="bower_components/paper-dialog/paper-dialog.html" rel="import">
    <link href="bower_components/paper-dialog/paper-action-dialog.html" rel="import">
    <link rel="import" href="bower_components/paper-button/paper-button.html">
    <!-- not working link rel="import" href="bower_components/font-roboto/roboto.html" -->
    <link href="//fonts.googleapis.com/css?family=Roboto:400normal&amp;subset=all" rel="stylesheet" type="text/css">
    <style>
      html /deep/ #scroller {
        padding: 0; background:#009688;
      }
      html /deep/ paper-action-dialog .top {
        color:#fff; text-align:center;
      }
      html .wide /deep/ paper-action-dialog .top {
        float: left; min-width: 300px;
      }
      html /deep/ paper-action-dialog .top .a {
        background:#00796b; padding: 8px; font-size:14px;
      }
      html /deep/ paper-action-dialog .top .b {
        font-size:34px; padding-top:10px; text-transform: uppercase;
      }
      html /deep/ paper-action-dialog .top .c {
        font-size:60px;
      }
      html /deep/ paper-action-dialog .top .d {
        font-size: 30px; color: #8acfc8; padding: 10px 0 10px;
      }
      html /deep/ paper-action-dialog .days {
        background:#fff; text-align:left; padding:0 10px; float: left; width: 300px;
      }
      html /deep/ paper-action-dialog .days .a {
        font-size: 15px; text-align:center; font-weight: bold; padding: 17px 0 1px;
      }
      html /deep/ paper-action-dialog .days .b {
        font-size:14px;
      }
      html /deep/ paper-action-dialog .days span.today {
        color:#fff; background:#009688; border-radius: 20px;
      }
      html /deep/ paper-action-dialog .days span {
        width: 39px; display: inline-block; text-align: center; height: 39px; line-height: 39px;
      }
      html /deep/ paper-action-dialog .days .c {
        font-size:14px; margin-top: -21px;
      }
      html /deep/ paper-action-dialog paper-button {
        color: #009688; padding: 10px; min-width: 39px;
      }
      html /deep/ paper-action-dialog   {
        font-family: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif;
      }
    </style>
  </head>
  <body unresolved>
  <template is="auto-binding">
    <section on-tap="{{toggleDialog1}}">
        <button>
            {{datePicking|format("l")}}
            <paper-action-dialog backdrop autoCloseDisabled>
              <div class="top">
                <div class="a" >{{datePicking|format('dddd')}}</div>
                <div class="b" >{{datePicking|format('MMM')}}</div>
                <div class="c" >{{datePicking|format('D')}}</div>
                <div class="d" >{{datePicking|format('YYYY')}}</div>
              </div>
              <div class="days">
                <div class="a" >{{datePicking|format('MMMM YYYY')}}</div>
                <div class="b">
                  <template repeat="{{ day_of_the_week in days_of_the_week }}">
                    <span>{{day_of_the_week | firstLetter}}</span>
                  </template>
                </div>
                <div class="c">
                  <template repeat="{{ day in notDays }}">
                    <span></span>
                  </template>
                  <template repeat="{{ day in days }}">
                    <span class="{{day | today}}" on-click="{{ dateClicked }}" role="button" >{{day}}</span>
                  </template>
                </div>
              </div>
              <paper-button affirmative>CANCEL</paper-button>
              <paper-button affirmative autofocus>OK</paper-button>
            </paper-action-dialog>
        </button>
    </section>
  </template>

  <script>
    Polymer("paper-datepicker", {
      publish: {
      // Defines the date-picker layout mode ('vertical' OR 'horizontal')
      orientation: 'vertical',
      //locales:

      //af = Afrikaans
      //sq = Albanian
      //ar = Arabic
      //ar-ma = Arabic (Morocco)
      //ar-sa = Arabic (Saudi Arabia)
      //hy-am = Armenian
      //az = Azerbaijani
      //id = Bahasa Indonesia
      //ms-my = Bahasa Malayu
      //eu = Basque
      //be = Belarusian
      //bn = Bengali
      //bs = Bosnian
      //br = Breton
      //bg = Bulgarian
      //my = Burmese
      //ca = Catalan
      //zh-cn = Chinese
      //zh-tw = Chinese (Traditional)
      //cv = Chuvash
      //hr = Croatian
      //cs = Czech
      //da = Danish
      //nl = Dutch
      //en = English
      //en-au = English (Australia)
      //en-ca = English (Canada)
      //en-gb = English (England)
      //eo = Esperanto
      //et = Estonian
      //fo = Farose
      //fi = Finnish
      //fr = French
      //fr-ca = French (Canada)
      //gl = Galician
      //ka = Georgian
      //de = German
      //de-at = German (Austria)
      //el = Greek
      //he = Hebrew
      //hi = Hindi
      //hu = Hungarian
      //is = Icelandic
      //it = Italian
      //ja = Japanese
      //km = Khmer (Cambodia)
      //ko = Korean
      //lv = Latvian
      //lt = Lithuanian
      //lb = Luxembourgish
      //mk = Macedonian
      //ml = Malayalam
      //mr = Marathi
      //ne = Nepalese
      //nb = Norwegian
      //nn = Norwegian Nynorsk
      //fa = Persian
      //pl = Polish
      //pt = Portuguese
      //pt-br = Portuguese (Brazil)
      //ro = Romanian
      //ru = Russian
      //sr = Serbian
      //sr-cyrl = Serbian Cyrillic
      //sk = Slovak
      //sl = Slovenian
      //es = Spanish
      //sv = Swedish
      //tl-ph = Tagalog (Filipino)
      //tzm = Tamaziɣt
      //tzm-latn = Tamaziɣt Latin
      //ta = Tamil
      //th = Thai
      //bo = Tibetan
      //tr = Turkish
      //uk = Ukrainian
      //uz = Uzbek
      //vi = Vietnamese
      //cy = Welsh

      locale: 'en-gb'
      },
      dateClicked: function(e) {
        var element = e.originalTarget ? e.originalTarget : e.toElement;
        debugger;
      }
    })
    moment.locale('en-gb');

    PolymerExpressions.prototype.firstLetter = function(input) {
      return input[0];
    };
    PolymerExpressions.prototype.today = function(input) {
      if ( moment(input ,"D").isSame(moment(), "day" )) {
        return "today";
      }
    };
    PolymerExpressions.prototype.format = function(input, letter) {
        return moment(input).format(letter);
    };

    var scope = document.querySelector('template[is=auto-binding]');
    scope.datePicking = moment();
    scope.days_of_the_week = moment.weekdaysMin();
    scope.days = Array();
    scope.notDays = Array();
    scope.dateClicked = function(e) {
      var element = e.originalTarget ? e.originalTarget : e.toElement;
      scope.datePicking = moment(element.textContent, 'D')
      debugger;
    }
    var notdays = +moment(1,"D").format("d")- 1
    if (notdays >= 0) {
      scope.notDays[ notdays ] = "";
    }
    for(i=1;i<=moment(scope.datePicking).daysInMonth();i++){
        scope.days[i-1] = i;
    }
    scope.toggleDialog1 = function(e) {
      var d = e.target.querySelector('paper-action-dialog');
      if (!d) {
        return;
      }
      d.toggle();
    };
  </script>
</body>
</html>
